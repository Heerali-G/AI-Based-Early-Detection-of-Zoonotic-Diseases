/* --- Color Palette Variables --- */
:root {
  /* Main Theme Colors */
  --primary-blue: #007bff; /* Accent Blue */
  --primary-teal: #00bcd4; /* Accent Teal/Cyan */
  --text-primary: #f0f4f8; /* Light Text (Default Dark Theme) */
  --text-secondary: #a0aec0; /* Subdued Text (Default Dark Theme) */
  --background-dark: #121212; /* Deep Black Background (Default Dark Theme) */
  --card-dark: #1e1e1e; /* Card/Tile Background (Default Dark Theme) */
  --border-dark: #303030; /* Divider/Border Color (Default Dark Theme) */

  /* Status Colors (Same in both themes) */
  --status-positive: #e53e3e; /* Red for High/Positive */
  --status-moderate: #f6ad55; /* Orange for Moderate */
  --status-negative: #48bb78; /* Green for Low/Negative */

  /* Shadows */
  --shadow-light: 0 4px 10px rgba(0, 0, 0, 0.3);
  --shadow-deep: 0 8px 20px rgba(0, 0, 0, 0.5);
}

/* ----------------------------------------------------
  --- Base Page & Theme ---
  ---------------------------------------------------- */
.app-dashboard {
  padding: 50px 20px;
  min-height: 100vh;
  font-family: "Inter", "Helvetica Neue", sans-serif;
  max-width: 900px;
  margin: 0 auto;
  transition: background-color 0.4s, color 0.4s;
}

/* Dark Theme (Default) */
.app-dashboard.dark-theme {
  background-color: var(--background-dark);
  color: var(--text-primary);
}

/* Light Theme Overrides (Sets new variable values) */
.app-dashboard.light-theme {
  background-color: #f7f7f7; /* Light Gray Background */
  color: #333; /* Dark Text */

  /* Variable Overrides */
  --card-dark: #fff; /* White Card/Tile Background */
  --border-dark: #e0e0e0; /* Light Gray Border */
  --text-primary: #333; /* Dark Text */
  --text-secondary: #666; /* Medium Gray Subdued Text */
  --shadow-light: 0 2px 5px rgba(0, 0, 0, 0.1);
  --shadow-deep: 0 4px 10px rgba(0, 0, 0, 0.15); /* Adjusted deep shadow for light theme */
}

/* ----------------------------------------------------
  --- Header & Typography ---
  ---------------------------------------------------- */

.section-title {
  font-size: 1.4em;
  font-weight: 700;
  color: var(--primary-blue);
  margin-bottom: 25px;
  border-left: 4px solid var(--primary-blue);
  padding-left: 10px;
}

/* ----------------------------------------------------
  --- Upload Container & Controls ---
  ---------------------------------------------------- */
.upload-section {
  /* Uses card-dark & shadow-light */
  background: var(--card-dark);
  padding: 30px;
  border-radius: 10px;
  box-shadow: var(--shadow-light);
  margin-bottom: 40px;
}

.file-dropzone {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 30px;
  margin-bottom: 20px;
  border: 2px dashed var(--primary-blue);
  border-radius: 8px;
  cursor: pointer;
  background: rgba(0, 123, 255, 0.05);
  transition: background 0.2s, border-color 0.2s;
}

.file-dropzone:hover {
  background: rgba(0, 123, 255, 0.15);
  border-color: var(--primary-teal);
}

.file-dropzone.file-selected {
  border-style: solid;
  border-color: var(--status-negative);
}

.file-dropzone.disabled-interaction {
  cursor: not-allowed;
  opacity: 0.6;
}

/* --- NEW UI ENHANCEMENT --- */
.file-dropzone.dragging {
  background: rgba(0, 188, 212, 0.2);
  border-color: var(--primary-teal);
  border-style: solid;
  transform: scale(1.02);
}

.upload-icon {
  font-size: 2.5em;
  margin-bottom: 10px;
}

.upload-text {
  font-weight: 600;
  margin: 5px 0;
}

.upload-hint {
  /* Uses text-secondary */
  font-size: 0.85em;
  color: var(--text-secondary);
}

/* Analyze Button */
.analyze-btn {
  width: 100%;
  padding: 15px 30px;
  border-radius: 8px;
  font-size: 1.1em;
  font-weight: 700;
  cursor: pointer;
  border: none;
  background-color: var(--primary-teal);
  /* This var(--card-dark) cleverly switches text color:
    Dark Mode: --card-dark is #1e1e1e (dark text)
    Light Mode: --card-dark is #fff (light text)
    This is the *opposite* of what was in your 2nd file, but makes more sense
    if you want light text on the teal button in light mode.
    If you want DARK text in light mode, uncomment the light-theme override below.
  */
  color: var(--card-dark);
  box-shadow: 0 4px 8px rgba(0, 188, 212, 0.4);
  transition: all 0.3s ease;
  
  /* --- NEW --- */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

/* This was in your 2nd file. It makes the button text DARK in light mode.
  It's a stylistic choice. Keep it if you prefer dark text on the button.
*/
/*
.app-dashboard.light-theme .analyze-btn {
  color: #333; 
}
*/

.analyze-btn:hover:not(:disabled) {
  background-color: var(--primary-blue);
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(0, 123, 255, 0.5);
}

.analyze-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  background-color: #616161;
  transform: none;
  box-shadow: none;
}

/* --- NEW SPINNER STYLES --- */
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.spinner {
  display: inline-block;
  width: 1.2em;
  height: 1.2em;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: #fff; /* This color will be the one spinning */
  animation: spin 1s ease-in-out infinite;
}
/* If you use the dark-text override for the light-theme button, you need this too */
.app-dashboard.light-theme .spinner {
   border: 3px solid rgba(0, 0, 0, 0.2);
   border-top-color: #333;
}


/* Error/Loading */
.error-message {
  color: var(--status-positive);
  background: rgba(229, 62, 62, 0.1);
  border: 1px solid var(--status-positive);
  border-radius: 6px;
  padding: 10px 15px;
  margin-top: 20px;
  font-weight: 500;
  text-align: center;
}

.loading-bar {
  height: 6px;
  background: var(--primary-teal);
  margin-top: 20px;
  width: 100%;
  border-radius: 3px;
  overflow: hidden;
  position: relative;
}
.loading-bar::after {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.5),
    transparent
  );
  animation: loadingStripes 1.5s infinite linear;
}
@keyframes loadingStripes {
  from { left: -100%; }
  to { left: 100%; }
}

/* ----------------------------------------------------
  --- Report Dashboard ---
  ---------------------------------------------------- */
.report-dashboard {
  /* Uses card-dark & shadow-deep */
  background: var(--card-dark);
  padding: 30px;
  border-radius: 10px;
  box-shadow: var(--shadow-deep);
  animation: fadeIn 0.6s ease-out forwards;
}

.report-dashboard.result-positive {
  border: 2px solid var(--status-positive);
}
.report-dashboard.result-negative {
  border: 2px solid var(--status-negative);
}

/* Status Bar */
.status-bar {
  display: flex;
  gap: 20px;
  align-items: center;
  padding: 15px 20px;
  margin-bottom: 30px;
  /* Uses border-dark */
  border: 1px solid var(--border-dark);
  border-radius: 8px;
  
  /* This was hardcoded in your inline CSS. This is the fix: */
  background: #252525;
}
/* LIGHT THEME OVERRIDE (This was missing from inline CSS) */
.app-dashboard.light-theme .status-bar {
  background: #fdfdfd; /* Light background for contrast against white card */
}

.status-icon-box {
  font-size: 2.5em;
  line-height: 1;
}

.status-summary,
.disease-summary {
  flex-grow: 1;
}

.status-title {
  /* Uses text-secondary */
  font-size: 0.85em;
  color: var(--text-secondary);
  text-transform: uppercase;
  font-weight: 500;
}

.status-value {
  font-size: 1.8em;
  font-weight: 800;
  line-height: 1.2;
}

.status-value.result-positive { color: var(--status-positive); }
.status-value.result-negative { color: var(--status-negative); }
.status-value.result-unknown { color: var(--primary-teal); }

/* Data Grid for Tiles */
.data-grid {
  display: grid; /* Added this line */
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.data-tile {
  padding: 20px;
  border-radius: 8px;
  /* Uses card-dark & border-dark */
  background: var(--card-dark);
  border: 1px solid var(--border-dark);
  transition: transform 0.2s;
}
.data-tile:hover {
  transform: translateY(-3px);
  /* Use shadow-light for a more subtle tile hover */
  box-shadow: var(--shadow-light); 
}

.tile-label {
  /* Uses text-secondary */
  display: block;
  font-size: 0.85em;
  color: var(--text-secondary);
  margin-bottom: 10px;
}

.tile-value {
  font-size: 2.5em;
  font-weight: 800;
  line-height: 1;
}

.tile-hint {
  /* Uses text-secondary */
  display: block;
  margin-top: 10px;
  font-size: 0.9em;
  color: var(--text-secondary);
}

/* Risk Tile Colors */
.data-tile.risk-high {
  border-color: var(--status-positive);
  background: rgba(229, 62, 62, 0.1);
}
.data-tile.risk-moderate {
  border-color: var(--status-moderate);
  background: rgba(246, 173, 85, 0.1);
}
.data-tile.risk-low {
  border-color: var(--status-negative);
  background: rgba(72, 166, 74, 0.1);
}
.data-tile.risk-high .tile-value { color: var(--status-positive); }
.data-tile.risk-moderate .tile-value { color: var(--status-moderate); }
.data-tile.risk-low .tile-value { color: var(--status-negative); }

/* Ct Detail List */
.ct-detail-tile {
  /* Styles for the tile itself */
}

.ct-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.ct-gene-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  /* Uses border-dark */
  border-bottom: 1px dashed var(--border-dark);
  font-size: 1em;
}
.ct-gene-item:last-child {
  border-bottom: none;
}
.gene-name {
  font-weight: 500;
  color: var(--primary-teal);
}
.gene-value {
  font-weight: 700;
  /* Uses text-primary */
  color: var(--text-primary);
}

/* Suggestions Panel */
.suggestions-panel {
  /* This was hardcoded in your inline CSS. This is the fix: */
  background: #282828;
  padding: 25px;
  border-radius: 8px;
  margin-bottom: 30px;
  border-left: 5px solid var(--primary-teal);
}

/* DARK THEME OVERRIDE (This was mismatched in your files) */
.app-dashboard.light-theme .suggestions-panel {
  background: #fbfafa; /* Very light gray for light mode */
}

.suggestions-panel h4 {
  color: var(--primary-teal);
  font-weight: 700;
  margin-bottom: 15px;
  font-size: 1.1em;
}

.suggestion-list {
  list-style: none;
  padding: 0;
}

.suggestion-list li {
  position: relative;
  padding-left: 25px;
  margin-bottom: 10px;
  line-height: 1.5;
  font-size: 0.95em;
  /* Inherits text color from parent, which is theme-aware */
}

.suggestion-list li::before {
  content: "â€¢";
  position: absolute;
  left: 0;
  color: var(--status-negative);
  font-size: 1.2em;
  line-height: 1;
}

.disclaimer-text {
  /* Uses text-secondary & border-dark */
  font-size: 0.8em;
  color: var(--text-secondary);
  text-align: center;
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid var(--border-dark);
}

/* ----------------------------------------------------
  --- Animations & Responsiveness ---
  ---------------------------------------------------- */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (max-width: 700px) {
  .dashboard-header {
    margin-bottom: 30px;
  }
  .app-title {
    font-size: 1.8em;
  }
  .status-bar {
    flex-direction: column;
    align-items: flex-start;
  }
  .status-summary,
  .disease-summary {
    width: 100%;
    margin-top: 10px;
  }
  .data-grid {
    grid-template-columns: 1fr;
  }
  .data-tile {
    padding: 15px;
  }
  .tile-value {
    font-size: 2em;
  }
}
/* --- Add this to your file --- */

/* ----------------------------------------------------
  --- PREVIEW & ICON STYLES ---
  ---------------------------------------------------- */
.app-logo svg {
  font-size: 0.8em; /* Scale SVG to match old emoji size */
  color: var(--primary-teal);
}

.upload-icon {
  font-size: 3em; /* Make icon container slightly larger */
  color: var(--primary-blue);
  margin-bottom: 10px;
  /* Added for preview */
  display: flex;
  align-items: center;
  justify-content: center;
  width: 70px;
  height: 70px;
  transition: all 0.3s ease;
}

.file-dropzone.file-selected .upload-icon {
  color: var(--status-negative);
  border-radius: 8px; /* Give it a soft border if it's a file */
  border: 2px solid var(--status-negative);
  padding: 5px;
}

.preview-image {
  width: 100%;
  height: 100%;
  object-fit: cover; /* This crops the image to fit the box */
  border-radius: 8px; /* Match the icon box's new border */
}

/* Make status bar icons colored */
.status-icon-box {
  font-size: 2.5em;
  line-height: 1;
}
.report-dashboard.result-positive .status-icon-box {
  color: var(--status-positive);
}
.report-dashboard.result-negative .status-icon-box {
  color: var(--status-negative);
}


/* ----------------------------------------------------
  --- NEW STAGGERED ANIMATIONS ---
  ---------------------------------------------------- */
  
/* This is the new animation for the tiles */
@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Apply the animation to the tiles */
.data-tile {
  /* ... keep all existing .data-tile styles ... */
  
  /* Add these new animation properties */
  animation: fadeUp 0.5s ease-out;
  animation-fill-mode: forwards; /* Stays visible after animating */
  opacity: 0; /* Start invisible */
}

/* Stagger the animations using nth-child */
.data-grid .data-tile:nth-child(1) {
  /* Delay the first tile slightly */
  animation-delay: 0.2s; 
}

.data-grid .data-tile:nth-child(2) {
  /* Delay the second tile */
  animation-delay: 0.4s;
}

/* You can add more if you have more tiles */
.data-grid .data-tile:nth-child(3) {
  animation-delay: 0.6s;
}

/* Also animate the suggestions panel */
.suggestions-panel {
  /* ... keep all existing .suggestions-panel styles ... */
  
  /* Add these new animation properties */
  animation: fadeUp 0.5s ease-out;
  animation-fill-mode: forwards;
  opacity: 0;
  animation-delay: 0.6s; /* Make it appear after the tiles */
}
/* ----------------------------------------------------
  --- HEADER & TYPOGRAPHY (UPDATED) ---
  ---------------------------------------------------- */

/* This is the main fix. We change from text-align: center to a flex layout */
/* ----------------------------------------------------
  --- HEADER & TYPOGRAPHY (FIXED) ---
  ---------------------------------------------------- */

/* ----------------------------------------------------
  --- HEADER & TYPOGRAPHY (FORCED FIX) ---
  ---------------------------------------------------- */
.dashboard-header {
  /* --- Layout Fix --- */
  display: flex !important;
  align-items: center !important;
  text-align: left !important;
  gap: 20px !important;

  /* --- Background Fix --- */
  background: transparent !important; /* This is the key fix! */

  /* --- Spacing/Border --- */
  padding: 0 !important;
  padding-bottom: 20px !important;
  margin-bottom: 40px !important;
  border-bottom: 1px solid var(--border-dark) !important;
}
.app-logo {
  font-size: 3.5rem; /* Make the logo icon a bit larger */
  color: var(--primary-teal);
  flex-shrink: 0; /* Prevent icon from shrinking */
  /* Remove any old font-size settings from .app-logo svg {} if you have them */
}

/* NEW: This is the new wrapper for our text */
.header-text {
  display: flex;
  flex-direction: column;
}

/* Adjust title and subtitle margins for the new layout */
.app-title {
  font-size: 2.2em;
  font-weight: 800;
  color: var(--primary-teal);
  margin-bottom: 4px; /* Tighter spacing */
}

.app-subtitle {
  font-size: 1.1em;
  color: var(--text-secondary);
  margin: 0; /* Remove default margins */
}
.app-subtitle strong {
  color: var(--primary-teal);
  font-weight: 600;
}